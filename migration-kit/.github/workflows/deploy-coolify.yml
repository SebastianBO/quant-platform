# GitHub Actions Workflow for Coolify Deployment
# This triggers Coolify to rebuild when you push to main
#
# Setup:
# 1. In Coolify, go to your app â†’ Webhooks
# 2. Copy the webhook URL
# 3. Add it as a GitHub secret: COOLIFY_WEBHOOK_URL

name: Deploy to Coolify

on:
  push:
    branches: [main]
  workflow_dispatch: # Allow manual trigger

jobs:
  deploy:
    name: Trigger Coolify Deployment
    runs-on: ubuntu-latest

    steps:
      - name: Trigger Coolify Webhook
        run: |
          curl -X POST "${{ secrets.COOLIFY_WEBHOOK_URL }}" \
            -H "Content-Type: application/json" \
            -d '{"ref": "${{ github.ref }}", "sha": "${{ github.sha }}"}'

      - name: Deployment Triggered
        run: |
          echo "âœ… Coolify deployment triggered!"
          echo "ðŸ“¦ Commit: ${{ github.sha }}"
          echo "ðŸŒ¿ Branch: ${{ github.ref_name }}"
          echo ""
          echo "Check Coolify dashboard for build progress."
